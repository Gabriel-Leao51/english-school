import{h as j}from"./chunk-2B5Z433V.js";import{a as q}from"./chunk-XP3KNFAN.js";import{j as S}from"./chunk-WZCPIXUU.js";import{a as O,b as g,c as P,d as F,f as w,h as I,i as L,k as T,l as N,m as k}from"./chunk-GYBNOWVX.js";import{Ka as m,L as x,La as c,_ as C,_a as s,ab as a,eb as r,ec as y,fb as i,gb as f,lb as v,m as b,mb as _,rc as E,tb as d,xb as M,y as h}from"./chunk-HXT3DNZN.js";function z(o,p){o&1&&(r(0,"div"),d(1," Email \xE9 obrigat\xF3rio "),i())}function V(o,p){o&1&&(r(0,"div"),d(1," Email inv\xE1lido "),i())}function D(o,p){if(o&1&&(r(0,"div",14),s(1,z,2,0,"div",15)(2,V,2,0,"div",15),i()),o&2){let e,t,n=_();m(),a("ngIf",(e=n.loginForm.get("email"))==null?null:e.hasError("required")),m(),a("ngIf",(t=n.loginForm.get("email"))==null?null:t.hasError("email"))}}function G(o,p){o&1&&(r(0,"div"),d(1," Senha \xE9 obrigat\xF3ria "),i())}function B(o,p){if(o&1&&(r(0,"div",14),s(1,G,2,0,"div",15),i()),o&2){let e,t=_();m(),a("ngIf",(e=t.loginForm.get("password"))==null?null:e.hasError("required"))}}var oo=(()=>{class o{constructor(e,t,n,l){this.fb=e,this.authService=t,this.router=n,this.toastr=l,this.showModal=!1,this.errorMessage="",this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",g.required]})}openModal(){this.showModal=!0}closeModal(e){let t=document.getElementById(e);t&&(t.style.display="none")}onSubmit(){this.loginForm.valid&&this.authService.login(this.loginForm.value).pipe(x(()=>{this.toastr.success("Login realizado com sucesso!","Bem-Vindo!"),this.closeModal("loginModal")}),h(e=>(console.error("Erro no login:",e),this.toastr.error(e.error?.error||"Erro no login. Verifique email e senha.","Erro"),b(null)))).subscribe()}static{this.\u0275fac=function(t){return new(t||o)(c(T),c(k),c(S),c(j))}}static{this.\u0275cmp=C({type:o,selectors:[["app-login"]],standalone:!0,features:[M],decls:21,vars:5,consts:[["id","loginModal",3,"closed","isOpen"],["id","loginModal",1,"modal"],[1,"modal-content"],[1,"container","mt-3"],[1,"row","justify-content-center"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(t,n){if(t&1&&(r(0,"app-modal",0),v("closed",function(){return n.showModal=!1}),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),d(7,"Login"),i(),r(8,"form",6),v("ngSubmit",function(){return n.onSubmit()}),r(9,"div",7)(10,"label",8),d(11,"Email:"),i(),f(12,"input",9),s(13,D,3,2,"div",10),i(),r(14,"div",7)(15,"label",11),d(16,"Senha:"),i(),f(17,"input",12),s(18,B,2,1,"div",10),i(),r(19,"button",13),d(20," Entrar "),i()()()()()()()()),t&2){let l,u;a("isOpen",n.showModal),m(8),a("formGroup",n.loginForm),m(5),a("ngIf",((l=n.loginForm.get("email"))==null?null:l.touched)&&((l=n.loginForm.get("email"))==null?null:l.invalid)),m(5),a("ngIf",((u=n.loginForm.get("password"))==null?null:u.touched)&&((u=n.loginForm.get("password"))==null?null:u.invalid)),m(),a("disabled",!n.loginForm.valid)}},dependencies:[N,w,O,P,F,I,L,y,E,q],styles:[".modal-content[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,var(--cor-primaria-transparente-leve),var(--cor-fundo-alternativa-transparente-leve));border:none;border-radius:8px;box-shadow:0 4px 10px #00000080;padding:30px}.close[_ngcontent-%COMP%]{color:var(--cor-texto-primaria);opacity:.8;transition:opacity .2s;position:relative;top:10px;right:15px}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{opacity:1}h2[_ngcontent-%COMP%]{color:var(--cor-texto-primaria);font-size:2rem;margin-bottom:40px;text-align:center}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:2rem;display:flex;flex-direction:column;align-items:center}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-20px;left:50%;transform:translate(-50%);background-color:transparent;color:var(--cor-texto-primaria);padding:0 5px;font-size:1rem;pointer-events:none;transition:all .2s ease-in-out}.form-control[_ngcontent-%COMP%]{background-color:var(--cor-fundo);border:1px solid var(--cor-texto-secundaria);color:var(--cor-texto-primaria);border-radius:4px;padding:10px}.form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #293d714d}.form-control[_ngcontent-%COMP%]:focus + .form-label[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) + .form-label[_ngcontent-%COMP%]{top:-10px;font-size:.7rem;color:var(--cor-primaria)}.btn-primary[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{background-color:var(--cor-secundaria);border-color:var(--cor-secundaria);color:var(--cor-fundo);padding:10px 30px;font-weight:700;transition:background-color .3s;border-radius:4px;display:block;margin:0 auto}.btn-primary[_ngcontent-%COMP%]:hover, .btn-success[_ngcontent-%COMP%]:hover{background-color:#c89f2f;border-color:#c89f2f;color:var(--cor-texto-primaria);cursor:pointer}a[_ngcontent-%COMP%]{color:var(--cor-destaque-1);text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.text-danger[_ngcontent-%COMP%]{color:var(--cor-destaque-2);font-size:.8rem;margin-top:5px}"]})}}return o})();export{oo as a};
